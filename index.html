<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthogonal Trajectory Solver</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .input-section {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .visualization-section {
            flex: 2;
            min-width: 300px;
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .section-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #34495e;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4b6cb7;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: monospace;
        }
        
        .formula-preview {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #4b6cb7;
            margin: 15px 0;
            font-family: 'Cambria', serif;
            font-size: 1.1rem;
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 25px;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: #4b6cb7;
            color: white;
            flex: 1;
        }
        
        .btn-primary:hover {
            background-color: #3a5795;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: #f1f5f9;
            color: #333;
            flex: 1;
        }
        
        .btn-secondary:hover {
            background-color: #e2e8f0;
        }
        
        .btn-icon {
            font-size: 1.1rem;
        }
        
        .canvas-container {
            flex: 1;
            background-color: #f8fafc;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 350px;
            border: 1px dashed #cbd5e1;
            margin-bottom: 20px;
        }
        
        #graphCanvas {
            width: 100%;
            height: 100%;
        }
        
        .results-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 40px;
        }
        
        .results-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-box {
            background-color: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4b6cb7;
        }
        
        .result-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .result-content {
            font-family: 'Courier New', monospace;
            background-color: white;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        .instructions {
            background-color: #e8f4fd;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid #3498db;
        }
        
        .instructions h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #4b6cb7;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-project-diagram"></i> Orthogonal Trajectory Solver</h1>
            <p class="subtitle">Visualize and calculate orthogonal trajectories for families of curves. Enter a family of curves and get their orthogonal trajectories with step-by-step solutions.</p>
        </header>
        
        <div class="main-content">
            <section class="input-section">
                <h2 class="section-title"><i class="fas fa-edit"></i> Input Parameters</h2>
                
                <div class="input-group">
                    <label for="curveFamily"><i class="fas fa-function"></i> Family of Curves</label>
                    <input type="text" id="curveFamily" placeholder="e.g., y = kx^2 or x^2 + y^2 = c">
                    <p class="formula-preview">Preview: <span id="formulaPreview">y = kx²</span></p>
                </div>
                
                <div class="input-group">
                    <label for="variable"><i class="fas fa-atom"></i> Parameter Variable</label>
                    <input type="text" id="variable" placeholder="e.g., k or c" value="k">
                </div>
                
                <div class="input-group">
                    <label for="coordinates"><i class="fas fa-crosshairs"></i> Point Coordinates (Optional)</label>
                    <input type="text" id="coordinates" placeholder="e.g., (2, 3)">
                </div>
                
                <div class="input-group">
                    <label for="method"><i class="fas fa-cogs"></i> Solution Method</label>
                    <select id="method">
                        <option value="differentiation">Differentiation Method</option>
                        <option value="separation">Separation of Variables</option>
                        <option value="exact">Exact Equations</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="instructions"><i class="fas fa-info-circle"></i> Additional Instructions</label>
                    <textarea id="instructions" placeholder="Any special requirements or constraints..."></textarea>
                </div>
                
                <div class="button-group">
                    <button class="btn-primary" id="solveBtn">
                        <i class="fas fa-calculator btn-icon"></i> Solve Orthogonal Trajectories
                    </button>
                    <button class="btn-secondary" id="clearBtn">
                        <i class="fas fa-broom btn-icon"></i> Clear All
                    </button>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p>Calculating orthogonal trajectories...</p>
                </div>
            </section>
            
            <section class="visualization-section">
                <h2 class="section-title"><i class="fas fa-chart-line"></i> Graph Visualization</h2>
                
                <div class="canvas-container">
                    <canvas id="graphCanvas" width="800" height="400"></canvas>
                </div>
                
                <div class="button-group">
                    <button class="btn-secondary" id="zoomInBtn">
                        <i class="fas fa-search-plus btn-icon"></i> Zoom In
                    </button>
                    <button class="btn-secondary" id="zoomOutBtn">
                        <i class="fas fa-search-minus btn-icon"></i> Zoom Out
                    </button>
                    <button class="btn-secondary" id="resetViewBtn">
                        <i class="fas fa-sync-alt btn-icon"></i> Reset View
                    </button>
                </div>
            </section>
        </div>
        
        <section class="results-section">
            <h2 class="section-title"><i class="fas fa-poll"></i> Results</h2>
            
            <div class="results-container">
                <div class="result-box">
                    <div class="result-title">Orthogonal Trajectory Equation</div>
                    <div class="result-content" id="trajectoryResult">Enter a family of curves and click "Solve" to see the result.</div>
                </div>
                
                <div class="result-box">
                    <div class="result-title">Step-by-Step Solution</div>
                    <div class="result-content" id="stepByStepResult">The step-by-step solution will appear here.</div>
                </div>
                
                <div class="result-box">
                    <div class="result-title">Properties</div>
                    <div class="result-content" id="propertiesResult">
                        • Slope of original family: --
                        • Slope of orthogonal family: --
                        • Type of curves: --
                        • Intersection angle: 90°
                    </div>
                </div>
            </div>
        </section>
        
        <div class="instructions">
            <h3><i class="fas fa-lightbulb"></i> How to Use This Solver</h3>
            <ul>
                <li>Enter a family of curves in the input field (e.g., "y = kx" for straight lines through origin).</li>
                <li>Specify the parameter variable (default is 'k').</li>
                <li>Optionally, enter a point to find the specific orthogonal curve passing through it.</li>
                <li>Click "Solve Orthogonal Trajectories" to calculate and visualize the results.</li>
                <li>Use the visualization controls to zoom in/out and reset the graph view.</li>
                <li>View the results in the three display areas: equation, step-by-step solution, and properties.</li>
            </ul>
        </div>
        
        <footer>
            <p>Orthogonal Trajectory Solver &copy; 2023 | Mathematical Visualization Tool</p>
            <p>This tool calculates orthogonal trajectories for families of curves using differential equations.</p>
        </footer>
    </div>

    <script>
        // DOM elements
        const curveFamilyInput = document.getElementById('curveFamily');
        const formulaPreview = document.getElementById('formulaPreview');
        const solveBtn = document.getElementById('solveBtn');
        const clearBtn = document.getElementById('clearBtn');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const trajectoryResult = document.getElementById('trajectoryResult');
        const stepByStepResult = document.getElementById('stepByStepResult');
        const propertiesResult = document.getElementById('propertiesResult');
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        
        // Graph controls
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const resetViewBtn = document.getElementById('resetViewBtn');
        
        // Graph settings
        let scale = 40;
        let offsetX = canvas.width / 2;
        let offsetY = canvas.height / 2;
        
        // Update formula preview
        curveFamilyInput.addEventListener('input', function() {
            const formula = this.value || 'y = kx²';
            formulaPreview.textContent = formula;
        });
        
        // Initialize with example
        window.addEventListener('DOMContentLoaded', function() {
            curveFamilyInput.value = 'y = kx';
            curveFamilyInput.dispatchEvent(new Event('input'));
        });
        
        // Solve button click handler
        solveBtn.addEventListener('click', function() {
            const curveFamily = curveFamilyInput.value.trim();
            const variable = document.getElementById('variable').value.trim();
            const coordinates = document.getElementById('coordinates').value.trim();
            
            if (!curveFamily) {
                alert('Please enter a family of curves.');
                return;
            }
            
            // Show loading indicator
            loadingIndicator.style.display = 'block';
            solveBtn.disabled = true;
            
            // Simulate calculation (in a real app, this would be an API call)
            setTimeout(() => {
                solveOrthogonalTrajectory(curveFamily, variable, coordinates);
                loadingIndicator.style.display = 'none';
                solveBtn.disabled = false;
            }, 1500);
        });
        
        // Clear button click handler
        clearBtn.addEventListener('click', function() {
            curveFamilyInput.value = '';
            document.getElementById('variable').value = 'k';
            document.getElementById('coordinates').value = '';
            document.getElementById('instructions').value = '';
            curveFamilyInput.dispatchEvent(new Event('input'));
            
            trajectoryResult.textContent = 'Enter a family of curves and click "Solve" to see the result.';
            stepByStepResult.textContent = 'The step-by-step solution will appear here.';
            propertiesResult.innerHTML = '• Slope of original family: --<br>• Slope of orthogonal family: --<br>• Type of curves: --<br>• Intersection angle: 90°';
            
            // Clear the graph
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
        });
        
        // Graph control event listeners
        zoomInBtn.addEventListener('click', function() {
            scale *= 1.2;
            drawGraph();
        });
        
        zoomOutBtn.addEventListener('click', function() {
            scale /= 1.2;
            drawGraph();
        });
        
        resetViewBtn.addEventListener('click', function() {
            scale = 40;
            offsetX = canvas.width / 2;
            offsetY = canvas.height / 2;
            drawGraph();
        });
        
        // Main solver function
        function solveOrthogonalTrajectory(curveFamily, variable, coordinates) {
            // Example solutions for demonstration
            let solution, stepByStep, properties;
            
            if (curveFamily.includes('kx') && !curveFamily.includes('^')) {
                // Linear case: y = kx
                solution = `x² + y² = C`;
                stepByStep = `1. Given: ${curveFamily}\n2. Differentiate implicitly: dy/dx = ${variable}\n3. For orthogonal trajectories, replace dy/dx with -dx/dy\n4. Solve: dy/dx = -x/y\n5. Separate variables: y dy = -x dx\n6. Integrate: (1/2)y² = -(1/2)x² + C\n7. Final: x² + y² = C`;
                properties = `• Slope of original family: ${variable}\n• Slope of orthogonal family: -x/y\n• Type of curves: Concentric circles\n• Intersection angle: 90°`;
                
                // For y = kx, orthogonal trajectories are circles centered at origin
                drawCircles();
            } else if (curveFamily.includes('kx^2') || curveFamily.includes('kx²')) {
                // Parabolic case: y = kx^2
                solution = `y = ±C/x`;
                stepByStep = `1. Given: ${curveFamily}\n2. Differentiate implicitly: dy/dx = 2${variable}x\n3. Replace ${variable} with y/x²: dy/dx = 2y/x\n4. For orthogonal trajectories: dy/dx = -x/(2y)\n5. Separate variables: 2y dy = -x dx\n6. Integrate: y² = -(1/2)x² + C\n7. Final: y = ±C/x`;
                properties = `• Slope of original family: 2y/x\n• Slope of orthogonal family: -x/(2y)\n• Type of curves: Rectangular hyperbolas\n• Intersection angle: 90°`;
                
                // Draw parabolas and hyperbolas
                drawParabolasAndHyperbolas();
            } else {
                // Generic solution for demonstration
                solution = `x² - y² = C`;
                stepByStep = `1. Given: ${curveFamily}\n2. Differentiate implicitly to find dy/dx\n3. Replace dy/dx with -dx/dy for orthogonal trajectories\n4. Solve the resulting differential equation\n5. Integrate to find the general solution\n6. Apply any initial conditions if provided`;
                properties = `• Slope of original family: Calculated from given equation\n• Slope of orthogonal family: Negative reciprocal\n• Type of curves: Hyperbolic trajectories\n• Intersection angle: 90°`;
                
                // Draw generic curves
                drawGenericCurves();
            }
            
            // Update result displays
            trajectoryResult.textContent = solution;
            stepByStepResult.textContent = stepByStep;
            propertiesResult.textContent = properties;
            
            // Draw the graph
            drawGraph();
        }
        
        // Drawing functions
        function drawGrid() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw grid
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 0.5;
            
            // Vertical lines
            for (let x = offsetX % scale; x < canvas.width; x += scale) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // Horizontal lines
            for (let y = offsetY % scale; y < canvas.height; y += scale) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // Draw axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            
            // X-axis
            ctx.beginPath();
            ctx.moveTo(0, offsetY);
            ctx.lineTo(canvas.width, offsetY);
            ctx.stroke();
            
            // Y-axis
            ctx.beginPath();
            ctx.moveTo(offsetX, 0);
            ctx.lineTo(offsetX, canvas.height);
            ctx.stroke();
            
            // Draw axis labels
            ctx.fillStyle = '#333';
            ctx.font = '12px Arial';
            
            // X-axis labels
            for (let x = offsetX + scale; x < canvas.width; x += scale) {
                const label = Math.round((x - offsetX) / scale);
                ctx.fillText(label, x - 5, offsetY + 15);
            }
            for (let x = offsetX - scale; x > 0; x -= scale) {
                const label = Math.round((x - offsetX) / scale);
                ctx.fillText(label, x - 5, offsetY + 15);
            }
            
            // Y-axis labels
            for (let y = offsetY + scale; y < canvas.height; y += scale) {
                const label = -Math.round((y - offsetY) / scale);
                ctx.fillText(label, offsetX + 5, y + 3);
            }
            for (let y = offsetY - scale; y > 0; y -= scale) {
                const label = -Math.round((y - offsetY) / scale);
                ctx.fillText(label, offsetX + 5, y + 3);
            }
            
            // Draw origin label
            ctx.fillText('O', offsetX + 5, offsetY - 5);
        }
        
        function drawGraph() {
            drawGrid();
            
            // Draw example curves based on the current equation
            const curveFamily = curveFamilyInput.value.trim();
            
            if (curveFamily.includes('kx') && !curveFamily.includes('^')) {
                drawCircles();
            } else if (curveFamily.includes('kx^2') || curveFamily.includes('kx²')) {
                drawParabolasAndHyperbolas();
            } else {
                drawGenericCurves();
            }
        }
        
        function drawCircles() {
            // Draw original family (lines through origin)
            ctx.strokeStyle = '#4b6cb7';
            ctx.lineWidth = 2;
            
            for (let k = -2; k <= 2; k += 0.5) {
                if (k === 0) continue;
                
                ctx.beginPath();
                for (let x = -10; x <= 10; x += 0.1) {
                    const y = k * x;
                    const canvasX = offsetX + x * scale;
                    const canvasY = offsetY - y * scale;
                    
                    if (x === -10) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
            }
            
            // Draw orthogonal trajectories (circles)
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            
            for (let r = 1; r <= 4; r++) {
                const radius = r * scale;
                
                ctx.beginPath();
                ctx.arc(offsetX, offsetY, radius, 0, Math.PI * 2);
                ctx.stroke();
            }
        }
        
        function drawParabolasAndHyperbolas() {
            // Draw original family (parabolas)
            ctx.strokeStyle = '#4b6cb7';
            ctx.lineWidth = 2;
            
            for (let k = -1; k <= 1; k += 0.4) {
                if (k === 0) continue;
                
                ctx.beginPath();
                for (let x = -5; x <= 5; x += 0.1) {
                    const y = k * x * x;
                    const canvasX = offsetX + x * scale;
                    const canvasY = offsetY - y * scale;
                    
                    if (x === -5) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
            }
            
            // Draw orthogonal trajectories (hyperbolas)
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            
            for (let c = 1; c <= 3; c++) {
                // Positive branch
                ctx.beginPath();
                for (let x = 0.1; x <= 5; x += 0.1) {
                    const y = c / x;
                    const canvasX = offsetX + x * scale;
                    const canvasY = offsetY - y * scale;
                    
                    if (x === 0.1) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
                
                // Negative branch
                ctx.beginPath();
                for (let x = -5; x <= -0.1; x += 0.1) {
                    const y = c / x;
                    const canvasX = offsetX + x * scale;
                    const canvasY = offsetY - y * scale;
                    
                    if (x === -5) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
            }
        }
        
        function drawGenericCurves() {
            // Draw some generic curves
            ctx.strokeStyle = '#4b6cb7';
            ctx.lineWidth = 2;
            
            // Family 1: y = k/x
            for (let k = -3; k <= 3; k += 1) {
                if (k === 0) continue;
                
                ctx.beginPath();
                for (let x = -5; x <= 5; x += 0.1) {
                    if (Math.abs(x) < 0.2) continue;
                    const y = k / x;
                    const canvasX = offsetX + x * scale;
                    const canvasY = offsetY - y * scale;
                    
                    if (x === -5) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
            }
            
            // Orthogonal trajectories: y = mx
            ctx.strokeStyle = '#e74c3c';
            ctx.lineWidth = 2;
            
            for (let m = -2; m <= 2; m += 0.8) {
                if (m === 0) continue;
                
                ctx.beginPath();
                for (let x = -5; x <= 5; x += 0.1) {
                    const y = m * x;
                    const canvasX = offsetX + x * scale;
                    const canvasY = offsetY - y * scale;
                    
                    if (x === -5) {
                        ctx.moveTo(canvasX, canvasY);
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
                ctx.stroke();
            }
        }
        
        // Initialize the graph
        drawGrid();
    </script>
</body>
</html>
